<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Minimal Life</title><meta name="description" content="Minimal Life Blog"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/blog/_next/static/css/8bc0878b9f0a97ba.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/8bc0878b9f0a97ba.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/39f8e15b7fb4a6ba.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/39f8e15b7fb4a6ba.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/blog/_next/static/chunks/webpack-4d5208940e01a3dc.js" defer=""></script><script src="/blog/_next/static/chunks/framework-00b57966872fc495.js" defer=""></script><script src="/blog/_next/static/chunks/main-04fa69cd18d105e9.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-f55443f2448c8e66.js" defer=""></script><script src="/blog/_next/static/chunks/247-b84c2316c963d09c.js" defer=""></script><script src="/blog/_next/static/chunks/pages/post/%5Bid%5D-14b123b6aeba648e.js" defer=""></script><script src="/blog/_next/static/ou7D1WyUf2RvzYIGZNbCr/_buildManifest.js" defer=""></script><script src="/blog/_next/static/ou7D1WyUf2RvzYIGZNbCr/_ssgManifest.js" defer=""></script><script src="/blog/_next/static/ou7D1WyUf2RvzYIGZNbCr/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div><header class="Layout_header__TY1Ur"><div class="Avatar_avatar__Wqsgs"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="Avatar_img__fPm7S" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://avatars.githubusercontent.com/u/17166940?v=4 1x, https://avatars.githubusercontent.com/u/17166940?v=4 2x" src="https://avatars.githubusercontent.com/u/17166940?v=4" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="Avatar_img__fPm7S" loading="lazy"/></noscript></span><div class="Avatar_username__94Fmm">phshy0607</div></div><div class="Navbar_navbar__dE_dF"><nav class="Navbar_nav__lgcdH"><a href="/blog">Home</a></nav><nav class="Navbar_nav__lgcdH"><a href="/blog/posts">Posts</a></nav></div></header><main class="Layout_main__CO5d2"><div class="markdown-body"><h1 dir="auto">VS Code中使用Webpack alias后代码的Import与eslint兼容</h1>
<h2 dir="auto">说明</h2>
<p dir="auto">在项目中使用基于airbnb的lint规则，但配置完alias后，出现无法跳转，import/no-resolved规则报错等问题，调研几个小时，最终得出了解决方案，在此记录分享。</p>
<h2 dir="auto">方案</h2>
<p dir="auto">关于跳到引入文件位置的问题：</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// jsconfig.json
{
  &quot;compilerOptions&quot;: {
    &quot;jsx&quot;: &quot;react&quot;, // 支持jsx后缀
    &quot;module&quot;: &quot;commonjs&quot;, // commonjs规则，自动使用index.js作为入口
    &quot;target&quot;: &quot;es6&quot;,
    &quot;paths&quot;: { // alias配置
      &quot;@/*&quot;: [&quot;src/*&quot;]
    },
    &quot;baseUrl&quot;: &quot;./&quot; // 配合paths
  }
}"><pre><span class="pl-ii">// jsconfig.json</span>
{
  <span class="pl-ent">"compilerOptions"</span>: {
    <span class="pl-ent">"jsx"</span>: <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>, <span class="pl-ii">// 支持jsx后缀</span>
    <span class="pl-ent">"module"</span>: <span class="pl-s"><span class="pl-pds">"</span>commonjs<span class="pl-pds">"</span></span>, <span class="pl-ii">// commonjs规则，自动使用index.js作为入口</span>
    <span class="pl-ent">"target"</span>: <span class="pl-s"><span class="pl-pds">"</span>es6<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"paths"</span>: { <span class="pl-ii">// alias配置</span>
      <span class="pl-ent">"@/*"</span>: [<span class="pl-s"><span class="pl-pds">"</span>src/*<span class="pl-pds">"</span></span>]
    },
    <span class="pl-ent">"baseUrl"</span>: <span class="pl-s"><span class="pl-pds">"</span>./<span class="pl-pds">"</span> </span><span class="pl-ii">// 配合paths</span>
  }
}</pre></div>
<p dir="auto">很多人会忽略这个jsconfig配置，仅配置paths和baseUrl。若仅配置paths和baseUrl，使用ctrl + left click将无法定位到引入文件位置，jsx和module的配置很关键。</p>
<p dir="auto">关于eslint：</p>
<p dir="auto">若使用airbnb的lint规则或者使用eslint-import-plugin，会无法识别webpack或者工程内的alias编译配置，关于这个问题可以使用相应的<a href="https://github.com/benmosher/eslint-plugin-import/blob/master/README.md#resolvers">resolvers配置</a>。</p>
<p dir="auto">可以使用eslint-import-resolver-webpack这个包作为resolver配置，例</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// eslintrc.js
module.exports = {
  // ...
	settings: {
    // ...
    'import/resolver': {
      webpack: {
        config: './config/webpack/webpack.base.js',
      },
    },
  },
  // ...
}"><pre><span class="pl-c">// eslintrc.js</span>
<span class="pl-smi">module</span><span class="pl-kos">.</span><span class="pl-c1">exports</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c">// ...</span>
	<span class="pl-c1">settings</span>: <span class="pl-kos">{</span>
    <span class="pl-c">// ...</span>
    <span class="pl-s">'import/resolver'</span>: <span class="pl-kos">{</span>
      <span class="pl-c1">webpack</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">config</span>: <span class="pl-s">'./config/webpack/webpack.base.js'</span><span class="pl-kos">,</span>
      <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-c">// ...</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">这里的问题在于如果使用umi/cra/icejs等三方boilerplate搭建出的项目，可能没有webpack config，这里你会需要创建一个假的webpack配置，或者直接写webpack配置到eslintrc.js</p>
<p dir="auto">如果想绕过这个webpack配置，可以使用eslint-import-resolver-custom-alias这个包，配置如下</p>
<div class="highlight highlight-source-js notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="// eslintrc.js
module.exports = {
  // ...
	settings: {
    // ...
    'import/resolver': {
      'eslint-import-resolver-custom-alias': {
        alias: {
          '@': './src',
        },
        extensions: ['.js', '.jsx'],
      },
    }
  },
  // ...
}"><pre><span class="pl-c">// eslintrc.js</span>
<span class="pl-smi">module</span><span class="pl-kos">.</span><span class="pl-c1">exports</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
  <span class="pl-c">// ...</span>
	<span class="pl-c1">settings</span>: <span class="pl-kos">{</span>
    <span class="pl-c">// ...</span>
    <span class="pl-s">'import/resolver'</span>: <span class="pl-kos">{</span>
      <span class="pl-s">'eslint-import-resolver-custom-alias'</span>: <span class="pl-kos">{</span>
        <span class="pl-c1">alias</span>: <span class="pl-kos">{</span>
          <span class="pl-s">'@'</span>: <span class="pl-s">'./src'</span><span class="pl-kos">,</span>
        <span class="pl-kos">}</span><span class="pl-kos">,</span>
        <span class="pl-c1">extensions</span>: <span class="pl-kos">[</span><span class="pl-s">'.js'</span><span class="pl-kos">,</span> <span class="pl-s">'.jsx'</span><span class="pl-kos">]</span><span class="pl-kos">,</span>
      <span class="pl-kos">}</span><span class="pl-kos">,</span>
    <span class="pl-kos">}</span>
  <span class="pl-kos">}</span><span class="pl-kos">,</span>
  <span class="pl-c">// ...</span>
<span class="pl-kos">}</span></pre></div>
<p dir="auto">以上两个方案推荐使用eslint-import-resolver-custom-alias，简单方便且脱离webpack</p></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"html":"\u003ch1 dir=\"auto\"\u003eVS Code中使用Webpack alias后代码的Import与eslint兼容\u003c/h1\u003e\n\u003ch2 dir=\"auto\"\u003e说明\u003c/h2\u003e\n\u003cp dir=\"auto\"\u003e在项目中使用基于airbnb的lint规则，但配置完alias后，出现无法跳转，import/no-resolved规则报错等问题，调研几个小时，最终得出了解决方案，在此记录分享。\u003c/p\u003e\n\u003ch2 dir=\"auto\"\u003e方案\u003c/h2\u003e\n\u003cp dir=\"auto\"\u003e关于跳到引入文件位置的问题：\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-json notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"// jsconfig.json\n{\n  \u0026quot;compilerOptions\u0026quot;: {\n    \u0026quot;jsx\u0026quot;: \u0026quot;react\u0026quot;, // 支持jsx后缀\n    \u0026quot;module\u0026quot;: \u0026quot;commonjs\u0026quot;, // commonjs规则，自动使用index.js作为入口\n    \u0026quot;target\u0026quot;: \u0026quot;es6\u0026quot;,\n    \u0026quot;paths\u0026quot;: { // alias配置\n      \u0026quot;@/*\u0026quot;: [\u0026quot;src/*\u0026quot;]\n    },\n    \u0026quot;baseUrl\u0026quot;: \u0026quot;./\u0026quot; // 配合paths\n  }\n}\"\u003e\u003cpre\u003e\u003cspan class=\"pl-ii\"\u003e// jsconfig.json\u003c/span\u003e\n{\n  \u003cspan class=\"pl-ent\"\u003e\"compilerOptions\"\u003c/span\u003e: {\n    \u003cspan class=\"pl-ent\"\u003e\"jsx\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ereact\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e, \u003cspan class=\"pl-ii\"\u003e// 支持jsx后缀\u003c/span\u003e\n    \u003cspan class=\"pl-ent\"\u003e\"module\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ecommonjs\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e, \u003cspan class=\"pl-ii\"\u003e// commonjs规则，自动使用index.js作为入口\u003c/span\u003e\n    \u003cspan class=\"pl-ent\"\u003e\"target\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003ees6\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e,\n    \u003cspan class=\"pl-ent\"\u003e\"paths\"\u003c/span\u003e: { \u003cspan class=\"pl-ii\"\u003e// alias配置\u003c/span\u003e\n      \u003cspan class=\"pl-ent\"\u003e\"@/*\"\u003c/span\u003e: [\u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003esrc/*\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e\u003c/span\u003e]\n    },\n    \u003cspan class=\"pl-ent\"\u003e\"baseUrl\"\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e./\u003cspan class=\"pl-pds\"\u003e\"\u003c/span\u003e \u003c/span\u003e\u003cspan class=\"pl-ii\"\u003e// 配合paths\u003c/span\u003e\n  }\n}\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003e很多人会忽略这个jsconfig配置，仅配置paths和baseUrl。若仅配置paths和baseUrl，使用ctrl + left click将无法定位到引入文件位置，jsx和module的配置很关键。\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e关于eslint：\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e若使用airbnb的lint规则或者使用eslint-import-plugin，会无法识别webpack或者工程内的alias编译配置，关于这个问题可以使用相应的\u003ca href=\"https://github.com/benmosher/eslint-plugin-import/blob/master/README.md#resolvers\"\u003eresolvers配置\u003c/a\u003e。\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e可以使用eslint-import-resolver-webpack这个包作为resolver配置，例\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"// eslintrc.js\nmodule.exports = {\n  // ...\n\tsettings: {\n    // ...\n    'import/resolver': {\n      webpack: {\n        config: './config/webpack/webpack.base.js',\n      },\n    },\n  },\n  // ...\n}\"\u003e\u003cpre\u003e\u003cspan class=\"pl-c\"\u003e// eslintrc.js\u003c/span\u003e\n\u003cspan class=\"pl-smi\"\u003emodule\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003eexports\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"pl-c\"\u003e// ...\u003c/span\u003e\n\t\u003cspan class=\"pl-c1\"\u003esettings\u003c/span\u003e: \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"pl-c\"\u003e// ...\u003c/span\u003e\n    \u003cspan class=\"pl-s\"\u003e'import/resolver'\u003c/span\u003e: \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"pl-c1\"\u003ewebpack\u003c/span\u003e: \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"pl-c1\"\u003econfig\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e'./config/webpack/webpack.base.js'\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"pl-c\"\u003e// ...\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003e这里的问题在于如果使用umi/cra/icejs等三方boilerplate搭建出的项目，可能没有webpack config，这里你会需要创建一个假的webpack配置，或者直接写webpack配置到eslintrc.js\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e如果想绕过这个webpack配置，可以使用eslint-import-resolver-custom-alias这个包，配置如下\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-js notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"// eslintrc.js\nmodule.exports = {\n  // ...\n\tsettings: {\n    // ...\n    'import/resolver': {\n      'eslint-import-resolver-custom-alias': {\n        alias: {\n          '@': './src',\n        },\n        extensions: ['.js', '.jsx'],\n      },\n    }\n  },\n  // ...\n}\"\u003e\u003cpre\u003e\u003cspan class=\"pl-c\"\u003e// eslintrc.js\u003c/span\u003e\n\u003cspan class=\"pl-smi\"\u003emodule\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003eexports\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"pl-c\"\u003e// ...\u003c/span\u003e\n\t\u003cspan class=\"pl-c1\"\u003esettings\u003c/span\u003e: \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"pl-c\"\u003e// ...\u003c/span\u003e\n    \u003cspan class=\"pl-s\"\u003e'import/resolver'\u003c/span\u003e: \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"pl-s\"\u003e'eslint-import-resolver-custom-alias'\u003c/span\u003e: \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"pl-c1\"\u003ealias\u003c/span\u003e: \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"pl-s\"\u003e'@'\u003c/span\u003e: \u003cspan class=\"pl-s\"\u003e'./src'\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"pl-c1\"\u003eextensions\u003c/span\u003e: \u003cspan class=\"pl-kos\"\u003e[\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e'.js'\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e \u003cspan class=\"pl-s\"\u003e'.jsx'\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e]\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"pl-c\"\u003e// ...\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003e以上两个方案推荐使用eslint-import-resolver-custom-alias，简单方便且脱离webpack\u003c/p\u003e"},"__N_SSG":true},"page":"/post/[id]","query":{"id":"27"},"buildId":"ou7D1WyUf2RvzYIGZNbCr","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>