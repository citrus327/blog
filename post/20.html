<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Minimal Life</title><meta name="description" content="Minimal Life Blog"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/blog/_next/static/css/6db3845f9f3a867b.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/6db3845f9f3a867b.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/452f28fbf231f2d9.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/452f28fbf231f2d9.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/blog/_next/static/chunks/webpack-4d5208940e01a3dc.js" defer=""></script><script src="/blog/_next/static/chunks/framework-00b57966872fc495.js" defer=""></script><script src="/blog/_next/static/chunks/main-04fa69cd18d105e9.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-f55443f2448c8e66.js" defer=""></script><script src="/blog/_next/static/chunks/247-b84c2316c963d09c.js" defer=""></script><script src="/blog/_next/static/chunks/pages/post/%5Bid%5D-5f7ac47925745e56.js" defer=""></script><script src="/blog/_next/static/omu7xOcC_Htm6VtBdPWM9/_buildManifest.js" defer=""></script><script src="/blog/_next/static/omu7xOcC_Htm6VtBdPWM9/_ssgManifest.js" defer=""></script><script src="/blog/_next/static/omu7xOcC_Htm6VtBdPWM9/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="Layout_container__KdNo5"><header class="Layout_header__TY1Ur"><div class="Avatar_avatar__Wqsgs"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="Avatar_img__fPm7S" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://avatars.githubusercontent.com/u/17166940?v=4 1x, https://avatars.githubusercontent.com/u/17166940?v=4 2x" src="https://avatars.githubusercontent.com/u/17166940?v=4" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="Avatar_img__fPm7S" loading="lazy"/></noscript></span><div class="Avatar_username__94Fmm">phshy0607</div></div><div class="Navbar_navbar__dE_dF"><nav class="Navbar_nav__lgcdH"><a href="/blog">Home</a></nav><nav class="Navbar_nav__lgcdH"><a href="/blog/posts">Posts</a></nav></div></header><main class="Layout_main__CO5d2"><div class="markdown-body"><h2 dir="auto">Struct</h2>
<p dir="auto">声明Struct结构</p>
<div class="highlight highlight-source-rust notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="struct User {
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}"><pre><span class="pl-k">struct</span> <span class="pl-en">User</span> {
    username: <span class="pl-k">String</span>,
    email: <span class="pl-k">String</span>,
    sign_in_count: <span class="pl-k">u64</span>,
    active: <span class="pl-k">bool</span>,
}</pre></div>
<p dir="auto">初始化User实例</p>
<div class="highlight highlight-source-rust notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content=" let user1 = User {
 	 email: String::from(&quot;someone@example.com&quot;),
   username: String::from(&quot;someusername123&quot;),
   active: true,
   sign_in_count: 1,
 };"><pre> <span class="pl-k">let</span> user1 <span class="pl-k">=</span> User {
 	 email: <span class="pl-k">String</span><span class="pl-k">::</span><span class="pl-en">from</span>(<span class="pl-s">"someone@example.com"</span>),
   username: <span class="pl-k">String</span><span class="pl-k">::</span><span class="pl-en">from</span>(<span class="pl-s">"someusername123"</span>),
   active: <span class="pl-c1">true</span>,
   sign_in_count: <span class="pl-c1">1</span>,
 };</pre></div>
<p dir="auto">读取与修改User实例或属性</p>
<div class="highlight highlight-source-rust notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="let mut u = User {
  email: String::from(&quot;someone@example.com&quot;),
  username: String::from(&quot;someusername123&quot;),
  active: true,
  sign_in_count: 1,
};
u.sign_in_count = 5;

println!(&quot;{}&quot;, u.sign_in_count);"><pre><span class="pl-k">let</span> <span class="pl-k">mut</span> u <span class="pl-k">=</span> User {
  email: <span class="pl-k">String</span><span class="pl-k">::</span><span class="pl-en">from</span>(<span class="pl-s">"someone@example.com"</span>),
  username: <span class="pl-k">String</span><span class="pl-k">::</span><span class="pl-en">from</span>(<span class="pl-s">"someusername123"</span>),
  active: <span class="pl-c1">true</span>,
  sign_in_count: <span class="pl-c1">1</span>,
};
u.sign_in_count <span class="pl-k">=</span> <span class="pl-c1">5</span>;

<span class="pl-c1">println!</span>(<span class="pl-s">"{}"</span>, u.sign_in_count);</pre></div>
<p dir="auto">如果想要修改实例的属性，整个实例必须被标注为mut</p>
<div class="highlight highlight-source-rust notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn area(&amp;self) -&gt; u32 {
        self.width * self.height
    }
    fn change_width (&amp;mut self, new_width: u32) {
        self.width = new_width;
    }
    fn create () -&gt; Rectangle {
        Rectangle {
            width: 23,
            height: 32
        }
    }
}

fn main() {
    let mut rect1 = Rectangle::create();
    println!(&quot;rect1 is {:#?}&quot;, rect1);
    println!(&quot;rect1 area is {}&quot;, rect1.area());
    rect1.change_width(32);
    println!(&quot;rect1 area after change is {}&quot;, rect1.area());
}"><pre>#[derive(Debug)]
<span class="pl-k">struct</span> <span class="pl-en">Rectangle</span> {
    width: <span class="pl-k">u32</span>,
    height: <span class="pl-k">u32</span>,
}

<span class="pl-k">impl</span> <span class="pl-en">Rectangle</span> {
    <span class="pl-k">fn</span> <span class="pl-en">area</span>(<span class="pl-k">&amp;</span><span class="pl-c1">self</span>) -&gt; <span class="pl-k">u32</span> {
        <span class="pl-c1">self</span>.width <span class="pl-k">*</span> <span class="pl-c1">self</span>.height
    }
    <span class="pl-k">fn</span> <span class="pl-en">change_width</span> (<span class="pl-k">&amp;</span><span class="pl-k">mut</span> <span class="pl-c1">self</span>, new_width: <span class="pl-k">u32</span>) {
        <span class="pl-c1">self</span>.width <span class="pl-k">=</span> new_width;
    }
    <span class="pl-k">fn</span> <span class="pl-en">create</span> () -&gt; Rectangle {
        Rectangle {
            width: <span class="pl-c1">23</span>,
            height: <span class="pl-c1">32</span>
        }
    }
}

<span class="pl-k">fn</span> <span class="pl-en">main</span>() {
    <span class="pl-k">let</span> <span class="pl-k">mut</span> rect1 <span class="pl-k">=</span> Rectangle<span class="pl-k">::</span><span class="pl-en">create</span>();
    <span class="pl-c1">println!</span>(<span class="pl-s">"rect1 is {:#?}"</span>, rect1);
    <span class="pl-c1">println!</span>(<span class="pl-s">"rect1 area is {}"</span>, rect1.<span class="pl-en">area</span>());
    rect1.<span class="pl-en">change_width</span>(<span class="pl-c1">32</span>);
    <span class="pl-c1">println!</span>(<span class="pl-s">"rect1 area after change is {}"</span>, rect1.<span class="pl-en">area</span>());
}</pre></div>
<p dir="auto">为struct添加方法，有提到static fn，例如create。</p>
<p dir="auto">但是实际调用其实不关心是否为static</p>
<p dir="auto">&amp;self为关键字代表this</p></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"html":"\u003ch2 dir=\"auto\"\u003eStruct\u003c/h2\u003e\n\u003cp dir=\"auto\"\u003e声明Struct结构\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-rust notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"struct User {\n    username: String,\n    email: String,\n    sign_in_count: u64,\n    active: bool,\n}\"\u003e\u003cpre\u003e\u003cspan class=\"pl-k\"\u003estruct\u003c/span\u003e \u003cspan class=\"pl-en\"\u003eUser\u003c/span\u003e {\n    username: \u003cspan class=\"pl-k\"\u003eString\u003c/span\u003e,\n    email: \u003cspan class=\"pl-k\"\u003eString\u003c/span\u003e,\n    sign_in_count: \u003cspan class=\"pl-k\"\u003eu64\u003c/span\u003e,\n    active: \u003cspan class=\"pl-k\"\u003ebool\u003c/span\u003e,\n}\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003e初始化User实例\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-rust notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\" let user1 = User {\n \t email: String::from(\u0026quot;someone@example.com\u0026quot;),\n   username: String::from(\u0026quot;someusername123\u0026quot;),\n   active: true,\n   sign_in_count: 1,\n };\"\u003e\u003cpre\u003e \u003cspan class=\"pl-k\"\u003elet\u003c/span\u003e user1 \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e User {\n \t email: \u003cspan class=\"pl-k\"\u003eString\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003e\u003cspan class=\"pl-en\"\u003efrom\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"someone@example.com\"\u003c/span\u003e),\n   username: \u003cspan class=\"pl-k\"\u003eString\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003e\u003cspan class=\"pl-en\"\u003efrom\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"someusername123\"\u003c/span\u003e),\n   active: \u003cspan class=\"pl-c1\"\u003etrue\u003c/span\u003e,\n   sign_in_count: \u003cspan class=\"pl-c1\"\u003e1\u003c/span\u003e,\n };\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003e读取与修改User实例或属性\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-rust notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"let mut u = User {\n  email: String::from(\u0026quot;someone@example.com\u0026quot;),\n  username: String::from(\u0026quot;someusername123\u0026quot;),\n  active: true,\n  sign_in_count: 1,\n};\nu.sign_in_count = 5;\n\nprintln!(\u0026quot;{}\u0026quot;, u.sign_in_count);\"\u003e\u003cpre\u003e\u003cspan class=\"pl-k\"\u003elet\u003c/span\u003e \u003cspan class=\"pl-k\"\u003emut\u003c/span\u003e u \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e User {\n  email: \u003cspan class=\"pl-k\"\u003eString\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003e\u003cspan class=\"pl-en\"\u003efrom\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"someone@example.com\"\u003c/span\u003e),\n  username: \u003cspan class=\"pl-k\"\u003eString\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003e\u003cspan class=\"pl-en\"\u003efrom\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"someusername123\"\u003c/span\u003e),\n  active: \u003cspan class=\"pl-c1\"\u003etrue\u003c/span\u003e,\n  sign_in_count: \u003cspan class=\"pl-c1\"\u003e1\u003c/span\u003e,\n};\nu.sign_in_count \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e5\u003c/span\u003e;\n\n\u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"{}\"\u003c/span\u003e, u.sign_in_count);\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003e如果想要修改实例的属性，整个实例必须被标注为mut\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-rust notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"#[derive(Debug)]\nstruct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nimpl Rectangle {\n    fn area(\u0026amp;self) -\u0026gt; u32 {\n        self.width * self.height\n    }\n    fn change_width (\u0026amp;mut self, new_width: u32) {\n        self.width = new_width;\n    }\n    fn create () -\u0026gt; Rectangle {\n        Rectangle {\n            width: 23,\n            height: 32\n        }\n    }\n}\n\nfn main() {\n    let mut rect1 = Rectangle::create();\n    println!(\u0026quot;rect1 is {:#?}\u0026quot;, rect1);\n    println!(\u0026quot;rect1 area is {}\u0026quot;, rect1.area());\n    rect1.change_width(32);\n    println!(\u0026quot;rect1 area after change is {}\u0026quot;, rect1.area());\n}\"\u003e\u003cpre\u003e#[derive(Debug)]\n\u003cspan class=\"pl-k\"\u003estruct\u003c/span\u003e \u003cspan class=\"pl-en\"\u003eRectangle\u003c/span\u003e {\n    width: \u003cspan class=\"pl-k\"\u003eu32\u003c/span\u003e,\n    height: \u003cspan class=\"pl-k\"\u003eu32\u003c/span\u003e,\n}\n\n\u003cspan class=\"pl-k\"\u003eimpl\u003c/span\u003e \u003cspan class=\"pl-en\"\u003eRectangle\u003c/span\u003e {\n    \u003cspan class=\"pl-k\"\u003efn\u003c/span\u003e \u003cspan class=\"pl-en\"\u003earea\u003c/span\u003e(\u003cspan class=\"pl-k\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003eself\u003c/span\u003e) -\u0026gt; \u003cspan class=\"pl-k\"\u003eu32\u003c/span\u003e {\n        \u003cspan class=\"pl-c1\"\u003eself\u003c/span\u003e.width \u003cspan class=\"pl-k\"\u003e*\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003eself\u003c/span\u003e.height\n    }\n    \u003cspan class=\"pl-k\"\u003efn\u003c/span\u003e \u003cspan class=\"pl-en\"\u003echange_width\u003c/span\u003e (\u003cspan class=\"pl-k\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"pl-k\"\u003emut\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003eself\u003c/span\u003e, new_width: \u003cspan class=\"pl-k\"\u003eu32\u003c/span\u003e) {\n        \u003cspan class=\"pl-c1\"\u003eself\u003c/span\u003e.width \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e new_width;\n    }\n    \u003cspan class=\"pl-k\"\u003efn\u003c/span\u003e \u003cspan class=\"pl-en\"\u003ecreate\u003c/span\u003e () -\u0026gt; Rectangle {\n        Rectangle {\n            width: \u003cspan class=\"pl-c1\"\u003e23\u003c/span\u003e,\n            height: \u003cspan class=\"pl-c1\"\u003e32\u003c/span\u003e\n        }\n    }\n}\n\n\u003cspan class=\"pl-k\"\u003efn\u003c/span\u003e \u003cspan class=\"pl-en\"\u003emain\u003c/span\u003e() {\n    \u003cspan class=\"pl-k\"\u003elet\u003c/span\u003e \u003cspan class=\"pl-k\"\u003emut\u003c/span\u003e rect1 \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e Rectangle\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003e\u003cspan class=\"pl-en\"\u003ecreate\u003c/span\u003e();\n    \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"rect1 is {:#?}\"\u003c/span\u003e, rect1);\n    \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"rect1 area is {}\"\u003c/span\u003e, rect1.\u003cspan class=\"pl-en\"\u003earea\u003c/span\u003e());\n    rect1.\u003cspan class=\"pl-en\"\u003echange_width\u003c/span\u003e(\u003cspan class=\"pl-c1\"\u003e32\u003c/span\u003e);\n    \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"rect1 area after change is {}\"\u003c/span\u003e, rect1.\u003cspan class=\"pl-en\"\u003earea\u003c/span\u003e());\n}\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003e为struct添加方法，有提到static fn，例如create。\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e但是实际调用其实不关心是否为static\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u0026amp;self为关键字代表this\u003c/p\u003e"},"__N_SSG":true},"page":"/post/[id]","query":{"id":"20"},"buildId":"omu7xOcC_Htm6VtBdPWM9","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>