<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Minimal Life</title><meta name="description" content="Minimal Life Blog"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="5"/><link rel="preload" href="/blog/_next/static/css/6db3845f9f3a867b.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/6db3845f9f3a867b.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/452f28fbf231f2d9.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/452f28fbf231f2d9.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/blog/_next/static/chunks/webpack-4d5208940e01a3dc.js" defer=""></script><script src="/blog/_next/static/chunks/framework-00b57966872fc495.js" defer=""></script><script src="/blog/_next/static/chunks/main-04fa69cd18d105e9.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-f55443f2448c8e66.js" defer=""></script><script src="/blog/_next/static/chunks/247-b84c2316c963d09c.js" defer=""></script><script src="/blog/_next/static/chunks/pages/post/%5Bid%5D-5f7ac47925745e56.js" defer=""></script><script src="/blog/_next/static/omu7xOcC_Htm6VtBdPWM9/_buildManifest.js" defer=""></script><script src="/blog/_next/static/omu7xOcC_Htm6VtBdPWM9/_ssgManifest.js" defer=""></script><script src="/blog/_next/static/omu7xOcC_Htm6VtBdPWM9/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="Layout_container__KdNo5"><header class="Layout_header__TY1Ur"><div class="Avatar_avatar__Wqsgs"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2724%27%20height=%2724%27/%3e"/></span><img alt="avatar" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="Avatar_img__fPm7S" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="avatar" srcSet="https://avatars.githubusercontent.com/u/17166940?v=4 1x, https://avatars.githubusercontent.com/u/17166940?v=4 2x" src="https://avatars.githubusercontent.com/u/17166940?v=4" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="Avatar_img__fPm7S" loading="lazy"/></noscript></span><div class="Avatar_username__94Fmm">phshy0607</div></div><div class="Navbar_navbar__dE_dF"><nav class="Navbar_nav__lgcdH"><a href="/blog">Home</a></nav><nav class="Navbar_nav__lgcdH"><a href="/blog/posts">Posts</a></nav></div></header><main class="Layout_main__CO5d2"><div class="markdown-body"><h2 dir="auto">Guessing Number 程序</h2>
<div class="highlight highlight-source-rust notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="use std::io;

fn main() {
    println!(&quot;Guess the number!&quot;);

    println!(&quot;Please input your guess.&quot;);

    // created a mutable variable that is currently bound to a new, empty instance of a String
    let mut guess = String::new();

    io::stdin()
        .read_line(&amp;mut guess)
        .expect(&quot;Failed to read line&quot;);

    println!(&quot;You guessed: {}&quot;, guess);
}"><pre><span class="pl-k">use</span> std<span class="pl-k">::</span>io;

<span class="pl-k">fn</span> <span class="pl-en">main</span>() {
    <span class="pl-c1">println!</span>(<span class="pl-s">"Guess the number!"</span>);

    <span class="pl-c1">println!</span>(<span class="pl-s">"Please input your guess."</span>);

    <span class="pl-c">// created a mutable variable that is currently bound to a new, empty instance of a String</span>
    <span class="pl-k">let</span> <span class="pl-k">mut</span> guess <span class="pl-k">=</span> <span class="pl-k">String</span><span class="pl-k">::</span><span class="pl-en">new</span>();

    io<span class="pl-k">::</span><span class="pl-en">stdin</span>()
        .<span class="pl-en">read_line</span>(<span class="pl-k">&amp;</span><span class="pl-k">mut</span> guess)
        .<span class="pl-en">expect</span>(<span class="pl-s">"Failed to read line"</span>);

    <span class="pl-c1">println!</span>(<span class="pl-s">"You guessed: {}"</span>, guess);
}</pre></div>
<ul dir="auto">
<li>
<p dir="auto">Prelude: 翻译为前奏，默认rust会引入一些default包，如果不在默认返回需要显式引入</p>
</li>
<li>
<p dir="auto"><code class="notranslate">mut </code>：mutable的意思在变量名前加上mut代表这个变量可以被mutate</p>
</li>
<li>
<p dir="auto"><code class="notranslate">String::new()</code>:可以理解成是call了String的一个static method</p>
</li>
<li>
<p dir="auto"><code class="notranslate">&amp;</code>: reference</p>
</li>
<li>
<p dir="auto">链式调用建议换行</p>
</li>
<li>
<p dir="auto"><code class="notranslate">read_line</code>返回的是一个<code class="notranslate">io:Result</code>的变量，可以用<code class="notranslate">expect</code>函数来处理异常情况，如果不处理，会给相应的warning让你处理。</p>
<blockquote>
<p dir="auto">If this instance of <code class="notranslate">io::Result</code> is an <code class="notranslate">Err</code> value, <code class="notranslate">expect</code> will cause the program to crash and display the message that you passed as an argument to <code class="notranslate">expect</code>. If the <code class="notranslate">read_line</code> method returns an <code class="notranslate">Err</code>, it would likely be the result of an error coming from the underlying operating system. If this instance of <code class="notranslate">io::Result</code> is an <code class="notranslate">Ok</code> value, <code class="notranslate">expect</code> will take the return value that <code class="notranslate">Ok</code> is holding and return just that value to you so you can use it.</p>
</blockquote>
</li>
<li>
<p dir="auto"><code class="notranslate">println!("You guessed: {}", guess);</code>可以使用<code class="notranslate">{}</code>做为占位符，如果有<code class="notranslate">{}</code>则必传相应参数</p>
</li>
</ul>
<h2 dir="auto">拓展Guessing Number</h2>
<ul dir="auto">
<li>
<p dir="auto">使用rand crates去生成随机数</p>
<p dir="auto"><code class="notranslate">let secret_number = rand::thread_rng().gen_range(1, 101);</code></p>
</li>
<li>
<p dir="auto">比较需要将stdin的输入转成int<br>
<code class="notranslate">let guess: u32 = guess.trim().parse().expect("Please type a number!");</code><br>
<code class="notranslate">:u32</code>是一种类型的anotation，告知parse函数需要转换成这种格式的数字</p>
</li>
<li>
<p dir="auto">代码里如果有已经定义过的变量，可以重复申明</p>
<div class="highlight highlight-source-rust notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="let mut guess = String::new();
// ...
let guess: i32 = guess.trim().parse().expect(&quot;Please type a number!&quot;);"><pre><span class="pl-k">let</span> <span class="pl-k">mut</span> guess <span class="pl-k">=</span> <span class="pl-k">String</span><span class="pl-k">::</span><span class="pl-en">new</span>();
<span class="pl-c">// ...</span>
<span class="pl-k">let</span> guess: <span class="pl-k">i32</span> <span class="pl-k">=</span> guess.<span class="pl-en">trim</span>().<span class="pl-en">parse</span>().<span class="pl-en">expect</span>(<span class="pl-s">"Please type a number!"</span>);</pre></div>
<blockquote>
<p dir="auto">This feature is often used in situations in which you want to convert a value from one type to another type</p>
</blockquote>
<p dir="auto">这种行为在Rust内称为Shadowing</p>
</li>
<li>
<p dir="auto">使用<code class="notranslate">match</code>进行数值比较</p>
<div class="highlight highlight-source-rust notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="match guess.cmp(&amp;secret_number) {
  Ordering::Less =&gt; println!(&quot;Too small!&quot;),
  Ordering::Greater =&gt; println!(&quot;Too big!&quot;),
  Ordering::Equal =&gt; println!(&quot;You win!&quot;),
}"><pre><span class="pl-k">match</span> guess.<span class="pl-en">cmp</span>(<span class="pl-k">&amp;</span>secret_number) {
  Ordering<span class="pl-k">::</span>Less <span class="pl-k">=&gt;</span> <span class="pl-c1">println!</span>(<span class="pl-s">"Too small!"</span>),
  Ordering<span class="pl-k">::</span>Greater <span class="pl-k">=&gt;</span> <span class="pl-c1">println!</span>(<span class="pl-s">"Too big!"</span>),
  Ordering<span class="pl-k">::</span>Equal <span class="pl-k">=&gt;</span> <span class="pl-c1">println!</span>(<span class="pl-s">"You win!"</span>),
}</pre></div>
</li>
<li>
<p dir="auto">添加循环，让用户持续输入直到win</p>
</li>
<li>
<p dir="auto">容错处理 - 如果输入的不是数字，parse成数字会报错，这种可以用match来处理。</p>
<div class="highlight highlight-source-rust notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="let guess: u32 = match guess.trim().parse() {
  Ok(num) =&gt; num,
  Err(_) =&gt; continue,
};"><pre><span class="pl-k">let</span> guess: <span class="pl-k">u32</span> <span class="pl-k">=</span> <span class="pl-k">match</span> guess.<span class="pl-en">trim</span>().<span class="pl-en">parse</span>() {
  <span class="pl-c1">Ok</span>(num) <span class="pl-k">=&gt;</span> num,
  <span class="pl-c1">Err</span>(_) <span class="pl-k">=&gt;</span> <span class="pl-k">continue</span>,
};</pre></div>
</li>
</ul></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"html":"\u003ch2 dir=\"auto\"\u003eGuessing Number 程序\u003c/h2\u003e\n\u003cdiv class=\"highlight highlight-source-rust notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"use std::io;\n\nfn main() {\n    println!(\u0026quot;Guess the number!\u0026quot;);\n\n    println!(\u0026quot;Please input your guess.\u0026quot;);\n\n    // created a mutable variable that is currently bound to a new, empty instance of a String\n    let mut guess = String::new();\n\n    io::stdin()\n        .read_line(\u0026amp;mut guess)\n        .expect(\u0026quot;Failed to read line\u0026quot;);\n\n    println!(\u0026quot;You guessed: {}\u0026quot;, guess);\n}\"\u003e\u003cpre\u003e\u003cspan class=\"pl-k\"\u003euse\u003c/span\u003e std\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003eio;\n\n\u003cspan class=\"pl-k\"\u003efn\u003c/span\u003e \u003cspan class=\"pl-en\"\u003emain\u003c/span\u003e() {\n    \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"Guess the number!\"\u003c/span\u003e);\n\n    \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"Please input your guess.\"\u003c/span\u003e);\n\n    \u003cspan class=\"pl-c\"\u003e// created a mutable variable that is currently bound to a new, empty instance of a String\u003c/span\u003e\n    \u003cspan class=\"pl-k\"\u003elet\u003c/span\u003e \u003cspan class=\"pl-k\"\u003emut\u003c/span\u003e guess \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eString\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003e\u003cspan class=\"pl-en\"\u003enew\u003c/span\u003e();\n\n    io\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003e\u003cspan class=\"pl-en\"\u003estdin\u003c/span\u003e()\n        .\u003cspan class=\"pl-en\"\u003eread_line\u003c/span\u003e(\u003cspan class=\"pl-k\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"pl-k\"\u003emut\u003c/span\u003e guess)\n        .\u003cspan class=\"pl-en\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"Failed to read line\"\u003c/span\u003e);\n\n    \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"You guessed: {}\"\u003c/span\u003e, guess);\n}\u003c/pre\u003e\u003c/div\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003ePrelude: 翻译为前奏，默认rust会引入一些default包，如果不在默认返回需要显式引入\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode class=\"notranslate\"\u003emut \u003c/code\u003e：mutable的意思在变量名前加上mut代表这个变量可以被mutate\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode class=\"notranslate\"\u003eString::new()\u003c/code\u003e:可以理解成是call了String的一个static method\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode class=\"notranslate\"\u003e\u0026amp;\u003c/code\u003e: reference\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e链式调用建议换行\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode class=\"notranslate\"\u003eread_line\u003c/code\u003e返回的是一个\u003ccode class=\"notranslate\"\u003eio:Result\u003c/code\u003e的变量，可以用\u003ccode class=\"notranslate\"\u003eexpect\u003c/code\u003e函数来处理异常情况，如果不处理，会给相应的warning让你处理。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp dir=\"auto\"\u003eIf this instance of \u003ccode class=\"notranslate\"\u003eio::Result\u003c/code\u003e is an \u003ccode class=\"notranslate\"\u003eErr\u003c/code\u003e value, \u003ccode class=\"notranslate\"\u003eexpect\u003c/code\u003e will cause the program to crash and display the message that you passed as an argument to \u003ccode class=\"notranslate\"\u003eexpect\u003c/code\u003e. If the \u003ccode class=\"notranslate\"\u003eread_line\u003c/code\u003e method returns an \u003ccode class=\"notranslate\"\u003eErr\u003c/code\u003e, it would likely be the result of an error coming from the underlying operating system. If this instance of \u003ccode class=\"notranslate\"\u003eio::Result\u003c/code\u003e is an \u003ccode class=\"notranslate\"\u003eOk\u003c/code\u003e value, \u003ccode class=\"notranslate\"\u003eexpect\u003c/code\u003e will take the return value that \u003ccode class=\"notranslate\"\u003eOk\u003c/code\u003e is holding and return just that value to you so you can use it.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode class=\"notranslate\"\u003eprintln!(\"You guessed: {}\", guess);\u003c/code\u003e可以使用\u003ccode class=\"notranslate\"\u003e{}\u003c/code\u003e做为占位符，如果有\u003ccode class=\"notranslate\"\u003e{}\u003c/code\u003e则必传相应参数\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 dir=\"auto\"\u003e拓展Guessing Number\u003c/h2\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e使用rand crates去生成随机数\u003c/p\u003e\n\u003cp dir=\"auto\"\u003e\u003ccode class=\"notranslate\"\u003elet secret_number = rand::thread_rng().gen_range(1, 101);\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e比较需要将stdin的输入转成int\u003cbr\u003e\n\u003ccode class=\"notranslate\"\u003elet guess: u32 = guess.trim().parse().expect(\"Please type a number!\");\u003c/code\u003e\u003cbr\u003e\n\u003ccode class=\"notranslate\"\u003e:u32\u003c/code\u003e是一种类型的anotation，告知parse函数需要转换成这种格式的数字\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e代码里如果有已经定义过的变量，可以重复申明\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-rust notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"let mut guess = String::new();\n// ...\nlet guess: i32 = guess.trim().parse().expect(\u0026quot;Please type a number!\u0026quot;);\"\u003e\u003cpre\u003e\u003cspan class=\"pl-k\"\u003elet\u003c/span\u003e \u003cspan class=\"pl-k\"\u003emut\u003c/span\u003e guess \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eString\u003c/span\u003e\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003e\u003cspan class=\"pl-en\"\u003enew\u003c/span\u003e();\n\u003cspan class=\"pl-c\"\u003e// ...\u003c/span\u003e\n\u003cspan class=\"pl-k\"\u003elet\u003c/span\u003e guess: \u003cspan class=\"pl-k\"\u003ei32\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e guess.\u003cspan class=\"pl-en\"\u003etrim\u003c/span\u003e().\u003cspan class=\"pl-en\"\u003eparse\u003c/span\u003e().\u003cspan class=\"pl-en\"\u003eexpect\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"Please type a number!\"\u003c/span\u003e);\u003c/pre\u003e\u003c/div\u003e\n\u003cblockquote\u003e\n\u003cp dir=\"auto\"\u003eThis feature is often used in situations in which you want to convert a value from one type to another type\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp dir=\"auto\"\u003e这种行为在Rust内称为Shadowing\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e使用\u003ccode class=\"notranslate\"\u003ematch\u003c/code\u003e进行数值比较\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-rust notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"match guess.cmp(\u0026amp;secret_number) {\n  Ordering::Less =\u0026gt; println!(\u0026quot;Too small!\u0026quot;),\n  Ordering::Greater =\u0026gt; println!(\u0026quot;Too big!\u0026quot;),\n  Ordering::Equal =\u0026gt; println!(\u0026quot;You win!\u0026quot;),\n}\"\u003e\u003cpre\u003e\u003cspan class=\"pl-k\"\u003ematch\u003c/span\u003e guess.\u003cspan class=\"pl-en\"\u003ecmp\u003c/span\u003e(\u003cspan class=\"pl-k\"\u003e\u0026amp;\u003c/span\u003esecret_number) {\n  Ordering\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003eLess \u003cspan class=\"pl-k\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"Too small!\"\u003c/span\u003e),\n  Ordering\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003eGreater \u003cspan class=\"pl-k\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"Too big!\"\u003c/span\u003e),\n  Ordering\u003cspan class=\"pl-k\"\u003e::\u003c/span\u003eEqual \u003cspan class=\"pl-k\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003eprintln!\u003c/span\u003e(\u003cspan class=\"pl-s\"\u003e\"You win!\"\u003c/span\u003e),\n}\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e添加循环，让用户持续输入直到win\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp dir=\"auto\"\u003e容错处理 - 如果输入的不是数字，parse成数字会报错，这种可以用match来处理。\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-rust notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"let guess: u32 = match guess.trim().parse() {\n  Ok(num) =\u0026gt; num,\n  Err(_) =\u0026gt; continue,\n};\"\u003e\u003cpre\u003e\u003cspan class=\"pl-k\"\u003elet\u003c/span\u003e guess: \u003cspan class=\"pl-k\"\u003eu32\u003c/span\u003e \u003cspan class=\"pl-k\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003ematch\u003c/span\u003e guess.\u003cspan class=\"pl-en\"\u003etrim\u003c/span\u003e().\u003cspan class=\"pl-en\"\u003eparse\u003c/span\u003e() {\n  \u003cspan class=\"pl-c1\"\u003eOk\u003c/span\u003e(num) \u003cspan class=\"pl-k\"\u003e=\u0026gt;\u003c/span\u003e num,\n  \u003cspan class=\"pl-c1\"\u003eErr\u003c/span\u003e(_) \u003cspan class=\"pl-k\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"pl-k\"\u003econtinue\u003c/span\u003e,\n};\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e"},"__N_SSG":true},"page":"/post/[id]","query":{"id":"17"},"buildId":"omu7xOcC_Htm6VtBdPWM9","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>