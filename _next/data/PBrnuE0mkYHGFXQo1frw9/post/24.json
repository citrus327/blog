{"pageProps":{"html":"<div class=\"highlight highlight-source-c notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"JS_PUBLIC_API(JSType)\n    JS_TypeOfValue(JSContext *cx, jsval v)\n    {\n        JSType type = JSTYPE_VOID;\n        JSObject *obj;\n        JSObjectOps *ops;\n        JSClass *clasp;\n\n        CHECK_REQUEST(cx);\n        if (JSVAL_IS_VOID(v)) {  // undefined\n            type = JSTYPE_VOID;\n        } else if (JSVAL_IS_OBJECT(v)) {  // object\n            obj = JSVAL_TO_OBJECT(v);\n            if (obj &amp;&amp;\n                (ops = obj-&gt;map-&gt;ops,\n                 ops == &amp;js_ObjectOps\n                 ? (clasp = OBJ_GET_CLASS(cx, obj),\n                    clasp-&gt;call || clasp == &amp;js_FunctionClass)\n                 : ops-&gt;call != 0)) {  // 是否为function 或者 有[[class]]标识，设置为function类型\n                type = JSTYPE_FUNCTION;\n            } else {\n                type = JSTYPE_OBJECT; // 否则为object类型，null命中。\n            }\n        } else if (JSVAL_IS_NUMBER(v)) {\n            type = JSTYPE_NUMBER;\n        } else if (JSVAL_IS_STRING(v)) {\n            type = JSTYPE_STRING;\n        } else if (JSVAL_IS_BOOLEAN(v)) {\n            type = JSTYPE_BOOLEAN;\n        }\n        return type;\n    }\"><pre><span class=\"pl-en\">JS_PUBLIC_API</span>(JSType)\n    JS_TypeOfValue(JSContext *cx, jsval v)\n    {\n        JSType type = JSTYPE_VOID;\n        JSObject *obj;\n        JSObjectOps *ops;\n        JSClass *clasp;\n\n        <span class=\"pl-c1\">CHECK_REQUEST</span>(cx);\n        <span class=\"pl-k\">if</span> (<span class=\"pl-c1\">JSVAL_IS_VOID</span>(v)) {  <span class=\"pl-c\"><span class=\"pl-c\">//</span> undefined</span>\n            type = JSTYPE_VOID;\n        } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"pl-c1\">JSVAL_IS_OBJECT</span>(v)) {  <span class=\"pl-c\"><span class=\"pl-c\">//</span> object</span>\n            obj = <span class=\"pl-c1\">JSVAL_TO_OBJECT</span>(v);\n            <span class=\"pl-k\">if</span> (obj &amp;&amp;\n                (ops = obj-&gt;<span class=\"pl-smi\">map</span>-&gt;<span class=\"pl-smi\">ops</span>,\n                 ops == &amp;js_ObjectOps\n                 ? (clasp = <span class=\"pl-c1\">OBJ_GET_CLASS</span>(cx, obj),\n                    clasp-&gt;<span class=\"pl-smi\">call</span> || clasp == &amp;js_FunctionClass)\n                 : ops-&gt;<span class=\"pl-smi\">call</span> != <span class=\"pl-c1\">0</span>)) {  <span class=\"pl-c\"><span class=\"pl-c\">//</span> 是否为function 或者 有[[class]]标识，设置为function类型</span>\n                type = JSTYPE_FUNCTION;\n            } <span class=\"pl-k\">else</span> {\n                type = JSTYPE_OBJECT; <span class=\"pl-c\"><span class=\"pl-c\">//</span> 否则为object类型，null命中。</span>\n            }\n        } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"pl-c1\">JSVAL_IS_NUMBER</span>(v)) {\n            type = JSTYPE_NUMBER;\n        } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"pl-c1\">JSVAL_IS_STRING</span>(v)) {\n            type = JSTYPE_STRING;\n        } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"pl-c1\">JSVAL_IS_BOOLEAN</span>(v)) {\n            type = JSTYPE_BOOLEAN;\n        }\n        <span class=\"pl-k\">return</span> type;\n    }</pre></div>\n<h2 dir=\"auto\">Reference</h2>\n<p dir=\"auto\"><a href=\"https://2ality.com/2013/10/typeof-null.html\" rel=\"nofollow\">https://2ality.com/2013/10/typeof-null.html</a></p>"},"__N_SSG":true}